{% extends 'base.html' %}

{% block navbar_right %}
<a href="{{ url_for('admin_login') }}" class="w3-bar-item w3-button w3-right">LOGIN</a>
{% endblock %}

{% block content %}
<br>
<center>
    <div id="qr-reader" style="width:400px; height:300px; border:1px solid #c0c0c0;"></div>
</center>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/html5-qrcode.min.js') }}"></script>
<script>
    const html5QrCode = new Html5Qrcode("qr-reader");
    
    html5QrCode.start(
        { facingMode: "environment" },
        {
            fps: 10,
            qrbox: { width: 250, height: 250 }
        },
        (decodedText, decodedResult) => {
            // Handle the scanned QR code
            console.log(`QR Code detected: ${decodedText}`);
            // You can send this to the server for attendance logging
        },
        (errorMessage) => {
            // Handle scan error
        }
    ).catch((err) => {
        console.log(`Unable to start scanning: ${err}`);
    });
</script>
{% endblock %}