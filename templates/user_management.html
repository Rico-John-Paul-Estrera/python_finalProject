{% extends 'base.html' %}

{% block content %}
{% include 'admin_sidebar.html' %}

<!-- Main content -->
<div style="margin-left:150px;">
    <div class="w3-container">
        <h5>USER MANAGEMENT</h5>
        <div class="w3-row">
            <!-- Left Form -->
            <div class="w3-third">
                <div class="w3-card-4 w3-padding">
                    <form method="POST" action="{{ url_for('save_user') }}">
                        <input type="hidden" name="user_id" id="user_id" value="">
                        <p>
                            <input type="text" name="name" id="name" class="w3-input w3-border" placeholder="name">
                        </p>
                        <p>
                            <input type="email" name="email" id="email" class="w3-input w3-border" placeholder="email">
                        </p>
                        <p>
                            <input type="password" name="password" id="password" class="w3-input w3-border" placeholder="password">
                        </p>
                        <p class="w3-center">
                            <button type="submit" class="w3-button w3-indigo">SAVE</button>
                        </p>
                    </form>
                </div>
            </div>
            <!-- Right Table -->
            <div class="w3-twothird">
                <table class="w3-table-all w3-hoverable">
                    <thead>
                        <tr class="w3-light-blue">
                            <th>ID</th>
                            <th>NAME</th>
                            <th>EMAIL</th>
                            <th>PASSWORD</th>
                            <th>ACTION</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                        <tr>
                            <td>{{ user.id }}</td>
                            <td>{{ user.name }}</td>
                            <td>{{ user.email }}</td>
                            <td>{{ user.password }}</td>
                            <td>
                                <button class="w3-button w3-small" onclick="editUser('{{ user.id }}', '{{ user.name }}', '{{ user.email }}', '{{ user.password }}')">&#9998;</button>
                                <a href="{{ url_for('delete_user', id=user.id) }}" class="w3-button w3-small" onclick="return confirm('Are you sure?')">&#128465;</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function editUser(id, name, email, password) {
        document.getElementById('user_id').value = id;
        document.getElementById('name').value = name;
        document.getElementById('email').value = email;
        document.getElementById('password').value = password;
    }
</script>
{% endblock %}
